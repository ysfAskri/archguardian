<div align="center">

<!-- HERO SECTION -->
<br>

```
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                                                               â•‘
    â•‘        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—     â•‘
    â•‘       â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â•‘
    â•‘       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â•‘
    â•‘       â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â•‘
    â•‘       â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•     â•‘
    â•‘       â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â•     â•‘
    â•‘                    A R D                                      â•‘
    â•‘               â”€â”€â”€ ARCHITECTURE GUARDIAN â”€â”€â”€                    â•‘
    â•‘                                                               â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

<br>

### ğŸ›¡ï¸ Stop AI from slowly destroying your codebase.

<br>

[![version](https://img.shields.io/badge/version-0.1.0-CB3837?style=for-the-badge&logo=hackthebox&logoColor=white)](https://github.com/ysfAskri/archguard/releases)
[![license](https://img.shields.io/badge/license-MIT-blue?style=for-the-badge&logo=opensourceinitiative&logoColor=white)](LICENSE)
[![node](https://img.shields.io/badge/node-%3E%3D18-339933?style=for-the-badge&logo=node.js&logoColor=white)](https://nodejs.org)
[![typescript](https://img.shields.io/badge/TypeScript-5.6+-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen?style=for-the-badge&logo=github&logoColor=white)](https://github.com/ysfAskri/archguard/pulls)

<br>

**Tool-agnostic CLI + git pre-commit hook** that catches architectural violations,<br>
duplication, convention drift, security issues, and AI-specific code smells<br>
**â€” before code reaches the repo.**

<br>

Works with &nbsp;
<img src="https://img.shields.io/badge/Cursor-000?style=flat-square&logo=cursor&logoColor=white" alt="Cursor" />
&nbsp;
<img src="https://img.shields.io/badge/Claude_Code-CC785C?style=flat-square&logo=anthropic&logoColor=white" alt="Claude Code" />
&nbsp;
<img src="https://img.shields.io/badge/Copilot-000?style=flat-square&logo=githubcopilot&logoColor=white" alt="Copilot" />
&nbsp;
<img src="https://img.shields.io/badge/Manual_Coding-444?style=flat-square&logo=visualstudiocode&logoColor=white" alt="Manual" />

<br><br>

[**Getting Started**](#-getting-started) Â· [**Features**](#-what-it-catches) Â· [**Config**](#%EF%B8%8F-configuration) Â· [**Roadmap**](#-roadmap) Â· [**Contributing**](#-contributing)

<br>

---

</div>

<br>

## ğŸ¤” The Problem

AI coding tools generate code **10x faster** â€” but at a hidden cost:

<table>
<tr>
<td width="33%" align="center">

### ğŸ“ˆ 8Ã—
**more duplication**<br>
<sub>Copy-paste patterns that<br>compound over time</sub>

</td>
<td width="33%" align="center">

### ğŸ”“ 45%
**more vulnerabilities**<br>
<sub>Hardcoded secrets, SQL injection,<br>XSS vectors in generated code</sub>

</td>
<td width="33%" align="center">

### ğŸ˜¤ 66%
**developer frustration**<br>
<sub>"AI solutions that are almost right,<br>but not quite" â€” Stack Overflow 2025</sub>

</td>
</tr>
</table>

> **Forrester predicts 75% of companies will face moderate-to-high technical debt severity in 2026.**
>
> No tool currently prevents these problems at commit time. **Until now.**

<br>

## âš¡ Getting Started

Three commands. Thirty seconds. Done.

```bash
# 1ï¸âƒ£  Initialize in your project
npx archguard init

# 2ï¸âƒ£  Scan your entire codebase
npx archguard scan

# 3ï¸âƒ£  That's it â€” staged changes are now checked automatically before every commit
git commit -m "feat: new feature"   # archguard runs automatically ğŸ›¡ï¸
```

<details>
<summary><b>ğŸ“¸ See it in action</b></summary>
<br>

```
  Scanning project...
  Found 27 files to analyze...

 Architecture Guardian
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  src/api/users.ts
  âœ— Possible hardcoded AWS Access Key detected
    src/api/users.ts:12 [security/hardcoded-secret]
    suggestion: Move secrets to environment variables or a secrets manager

  âœ— Potential SQL injection: SQL keywords in template literal with interpolation
    src/api/users.ts:25 [security/sql-injection]
    suggestion: Use parameterized queries instead of string interpolation

  src/components/Dashboard.tsx
  âš  Excessive comment-to-code ratio: 62% comments (threshold: 40%)
    src/components/Dashboard.tsx:1 [ai-smell/excessive-comments]
    suggestion: AI-generated code often has too many obvious comments.

  âš  Unused import: 'useCallback'
    src/components/Dashboard.tsx:1 [ai-smell/unused-import]
    suggestion: AI tools often add imports that are never used.

  src/utils/helpers.ts
  âš  Function 'ProcessData' should use camelCase naming
    src/utils/helpers.ts:8 [convention/function-naming]
    suggestion: Rename to match camelCase convention

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  2 errors, 3 warnings in 12 files (342ms)

  Commit blocked. Fix the issues above and try again.
```

</details>

<br>

## ğŸ” What It Catches

<br>

<table>
<tr>
<td width="50%" valign="top">

### ğŸ”’ Security Scanner

| Threat | Detection |
|:--|:--|
| **Hardcoded Secrets** | API keys, tokens, passwords â€” 11 regex patterns covering AWS, GitHub, Slack, Stripe, Google, JWTs, database URLs |
| **SQL Injection** | Template literals and string concatenation with SQL keywords |
| **XSS Vectors** | `innerHTML`, `outerHTML`, `dangerouslySetInnerHTML`, `document.write` |
| **Code Execution** | `eval()` and `Function()` constructor usage |
| **ReDoS** | Unsafe regex with nested quantifiers |
| **Custom Rules** | Add your own patterns via config |

</td>
<td width="50%" valign="top">

### ğŸ¤– AI Smell Detector

| Smell | What it Flags |
|:--|:--|
| **Excessive Comments** | Comment-to-code ratio above threshold (default 40%) |
| **Unused Imports** | Declared but never referenced in AST |
| **Verbose Errors** | Catch blocks 2Ã— larger than try blocks |
| **Copy-Paste** | Repeated code blocks within the same diff |
| **Type Hacks** | `as any` assertions, excessive `!` non-null operators |

</td>
</tr>
<tr>
<td width="50%" valign="top">

### ğŸ“ Convention Enforcer

| Target | Convention |
|:--|:--|
| **Functions** | `camelCase` |
| **Classes / Interfaces** | `PascalCase` |
| **Constants** | `UPPER_SNAKE` |
| **Files** | `kebab-case` |

All fully configurable per project.

</td>
<td width="50%" valign="top">

### ğŸ”® Coming Soon

| Feature | Version |
|:--|:--|
| **Duplicate Detection** | v0.2.0 |
| **Layer Violations** | v0.2.0 |
| **Auto-Learn Conventions** | v0.2.0 |
| **Plugin System** | v0.3.0 |
| **LLM Integration** | v0.3.0 |

</td>
</tr>
</table>

<br>

## ğŸ—ï¸ How It Works

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              ARCHITECTURE GUARDIAN                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  git commit        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚  Parse   â”‚â”€â”€â–¶ â”‚  Filter  â”‚â”€â”€â–¶ â”‚   AST    â”‚â”€â”€â–¶ â”‚ Analyze  â”‚
  (pre-commit)      â”‚  Diff    â”‚    â”‚  Files   â”‚    â”‚  Parse   â”‚    â”‚ (parallel)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         âœ… Pass â†’ commit proceeds
              â”‚Aggregate â”‚â”€â”€â–¶ â”‚  Report  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶
              â”‚& Dedup   â”‚    â”‚  Output  â”‚         âŒ Fail â†’ commit blocked
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<table>
<tr>
<td>ğŸ§© <b>AST-Powered</b></td>
<td>Uses <code>web-tree-sitter</code> (WASM) for real parsing â€” not regex hacks. Zero native compilation.</td>
</tr>
<tr>
<td>âš¡ <b>Parallel</b></td>
<td>All analyzers run concurrently with <code>Promise.allSettled</code> and 5s individual timeouts.</td>
</tr>
<tr>
<td>ğŸ¯ <b>Diff-Aware</b></td>
<td>Only checks <i>changed lines</i> in pre-commit mode â€” no noise from existing code.</td>
</tr>
<tr>
<td>ğŸ”Œ <b>Pluggable</b></td>
<td>Clean analyzer interface â€” bring your own rules (plugin system in v0.3.0).</td>
</tr>
</table>

<br>

## âš™ï¸ Configuration

Run `archguard init` or create `.archguard.yml` manually:

```yaml
# .archguard.yml
version: 1
languages: [typescript, javascript, tsx, jsx]
include: ["src/**"]
exclude: ["**/*.test.ts", "**/*.spec.ts", "**/node_modules/**"]

severity:
  failOn: error          # Block commits on: error | warning | info
  maxWarnings: 20        # Fail if warnings exceed this count

analyzers:
  security:
    enabled: true
    severity: error
    # customPatterns:    # Add your own regex patterns
    #   - name: "Internal API"
    #     pattern: "api\\.internal\\."
    #     severity: warning

  aiSmells:
    enabled: true
    severity: warning
    commentRatio: 0.4    # Flag files with >40% comments

  conventions:
    enabled: true
    severity: warning
    naming:
      functions: camelCase
      classes: PascalCase
      constants: UPPER_SNAKE
      files: kebab-case
    autoLearn: false      # v0.2.0: infer from existing code
```

<br>

## ğŸ–¥ï¸ CLI Reference

```
Usage: archguard [options] [command]

Stop AI from slowly destroying your codebase.

Options:
  -V, --version   output the version number
  --verbose        enable debug logging
  -h, --help      display help for command

Commands:
  init            create config + install git hook
  check           analyze staged changes (pre-commit mode)
  scan            analyze the full project
  learn           scan codebase and infer conventions (v0.2.0)
```

<details>
<summary><b>Exit Codes</b></summary>
<br>

| Code | Meaning | When |
|:----:|:--------|:-----|
| `0` | âœ… Success | No issues found |
| `1` | âŒ Errors found | Violations at or above `failOn` severity |
| `2` | âš ï¸ Warnings exceeded | More warnings than `maxWarnings` |
| `3` | ğŸ”§ Config error | Invalid `.archguard.yml` |
| `5` | â±ï¸ Timeout | Analysis exceeded time limit |

</details>

<br>

## âš¡ Performance

<table>
<tr>
<td align="center"><h3>< 400ms</h3><sub>Typical scan time</sub></td>
<td align="center"><h3>27 files</h3><sub>Full project parse</sub></td>
<td align="center"><h3>0</h3><sub>Native dependencies</sub></td>
<td align="center"><h3>WASM</h3><sub>Tree-sitter grammars</sub></td>
</tr>
</table>

> **Target: < 5 seconds** for typical diffs (1â€“10 files, < 500 changed lines).<br>
> Uses `web-tree-sitter` WASM â€” runs everywhere Node.js runs, zero compilation step.

<br>

## ğŸ—ºï¸ Roadmap

<table>
<tr>
<th width="120">Version</th>
<th>Features</th>
<th width="100">Status</th>
</tr>
<tr>
<td><b>v0.1.0</b></td>
<td>Security scanner Â· AI smell detector Â· Convention enforcer Â· CLI Â· Git hooks Â· TypeScript & JavaScript</td>
<td>âœ… Released</td>
</tr>
<tr>
<td><b>v0.2.0</b></td>
<td>Duplicate detection Â· Layer violation checks Â· Python support Â· <code>archguard learn</code> Â· JSON output</td>
<td>ğŸš§ Next</td>
</tr>
<tr>
<td><b>v0.3.0</b></td>
<td>Plugin system Â· LLM-powered suggestions Â· SARIF output Â· GitHub Action</td>
<td>ğŸ“‹ Planned</td>
</tr>
<tr>
<td><b>v1.0.0</b></td>
<td>VS Code extension Â· Auto-fix Â· Dashboard Â· Go / Rust / Java support Â· Metrics tracking</td>
<td>ğŸ”® Future</td>
</tr>
</table>

<br>

## ğŸ§‘â€ğŸ’» Contributing

```bash
# Clone and set up
git clone https://github.com/ysfAskri/archguard.git
cd archguard
npm install

# Build
npm run build

# Run tests
npm test

# Scan itself (dogfooding!)
node dist/cli/index.js scan
```

<details>
<summary><b>Project Structure</b></summary>
<br>

```
archguard/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ cli/                  # Commander.js CLI + commands
â”‚   â”‚   â”œâ”€â”€ commands/         # init, check, scan, learn
â”‚   â”‚   â””â”€â”€ output/           # Terminal reporter
â”‚   â”œâ”€â”€ core/                 # Pipeline, config, types, diff parsing
â”‚   â”œâ”€â”€ parsers/              # Tree-sitter WASM manager + AST utils
â”‚   â”œâ”€â”€ analyzers/            # Security, AI smells, conventions
â”‚   â”œâ”€â”€ rules/                # Rule interface + built-in rules
â”‚   â”œâ”€â”€ hooks/                # Git hook installer (direct + Husky)
â”‚   â””â”€â”€ utils/                # Git ops, logging, performance
â”œâ”€â”€ wasm/                     # Bundled tree-sitter WASM grammars
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                 # Per-module tests
â”‚   â”œâ”€â”€ integration/          # CLI + git hook E2E tests
â”‚   â””â”€â”€ fixtures/             # Sample code with violations
â”œâ”€â”€ .archguard.yml            # Dogfooding config
â”œâ”€â”€ tsup.config.ts            # Build config
â””â”€â”€ vitest.config.ts          # Test config
```

</details>

<br>

## ğŸ“„ License

[MIT](LICENSE) â€” use it, fork it, ship it.

<br>

---

<div align="center">

<br>

**Built by [Youssef ASKRI](https://github.com/ysfAskri)**

<br>

â­ **Star this repo** if archguard saved your codebase from AI-generated chaos.

<br>

<sub>

[Report Bug](https://github.com/ysfAskri/archguard/issues) Â· [Request Feature](https://github.com/ysfAskri/archguard/issues) Â· [Discussions](https://github.com/ysfAskri/archguard/discussions)

</sub>

<br><br>

</div>
